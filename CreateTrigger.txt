CREATE OR REPLACE FUNCTION delete_user_with_team() RETURNS trigger AS
$$
BEGIN
   delete from players where team_id = CAST ( TG_ARGV [0] AS integer );
   RETURN NULL;
END;
$$ 
LANGUAGE plpgsql;

CREATE TRIGGER delete_user_with_team
   BEFORE DELETE ON teams FOR EACH ROW
   EXECUTE PROCEDURE delete_user_with_team();